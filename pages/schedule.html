<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>排课管理</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* Custom scrollbar */
        .table-container::-webkit-scrollbar {
            height: 10px;
            width: 10px;
        }
        .table-container::-webkit-scrollbar-track {
            background: #f8fafc;
            border-radius: 4px;
        }
        .table-container::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 5px;
            border: 2px solid #f8fafc;
        }
        .table-container::-webkit-scrollbar-thumb:hover {
            background: #94a3b8;
        }
        
        .table-container {
            overflow: auto;
        }

        /* Transition for details row */
        .details-row {
            transition: all 0.3s ease-in-out;
        }
    </style>
</head>
<body class="p-4 bg-gray-50 h-screen overflow-hidden font-sans text-gray-700 flex flex-col">
    <!-- Main Container -->
    <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-4 flex flex-col flex-1 h-full overflow-hidden">
        
        <!-- Filter Section -->
        <div class="flex flex-wrap items-center justify-between mb-3 gap-4 shrink-0">
            <!-- Left Side: Filters and Action Buttons -->
            <div class="flex flex-wrap items-center gap-3">
                <!-- Academic Year Dropdown -->
                <div class="relative" id="year-dropdown">
                    <button id="year-select-btn" class="flex items-center justify-between w-36 bg-white border border-gray-300 text-gray-700 py-2 pl-4 pr-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm transition-shadow shadow-sm hover:border-gray-400">
                        <span id="year-select-text" class="text-gray-500">请选择学年</span>
                        <i class="fas fa-chevron-down text-xs text-gray-400 transition-transform duration-200" id="year-select-icon"></i>
                    </button>
                    <div id="year-options" class="hidden absolute top-full left-0 mt-1 w-full bg-white border border-gray-100 rounded-lg shadow-lg z-50 py-1 max-h-60 overflow-y-auto transform origin-top transition-all duration-200 opacity-0 scale-95">
                        <!-- Options generated by JS -->
                    </div>
                </div>

                <!-- Semester Dropdown -->
                <div class="relative" id="semester-dropdown">
                    <button id="semester-select-btn" class="flex items-center justify-between w-36 bg-white border border-gray-300 text-gray-700 py-2 pl-4 pr-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm transition-shadow shadow-sm hover:border-gray-400">
                        <span id="semester-select-text" class="text-gray-500">请选择学期</span>
                        <i class="fas fa-chevron-down text-xs text-gray-400 transition-transform duration-200" id="semester-select-icon"></i>
                    </button>
                    <div id="semester-options" class="hidden absolute top-full left-0 mt-1 w-full bg-white border border-gray-100 rounded-lg shadow-lg z-50 py-1 max-h-60 overflow-y-auto transform origin-top transition-all duration-200 opacity-0 scale-95">
                        <!-- Options generated by JS -->
                    </div>
                </div>

                <!-- College Dropdown -->
                <div class="relative" id="college-dropdown">
                    <button id="college-select-btn" class="flex items-center justify-between w-44 bg-white border border-gray-300 text-gray-700 py-2 pl-4 pr-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm transition-shadow shadow-sm hover:border-gray-400">
                        <span id="college-select-text" class="text-gray-500">请选择学院</span>
                        <i class="fas fa-chevron-down text-xs text-gray-400 transition-transform duration-200" id="college-select-icon"></i>
                    </button>
                    <div id="college-options" class="hidden absolute top-full left-0 mt-1 w-full bg-white border border-gray-100 rounded-lg shadow-lg z-50 py-1 max-h-60 overflow-y-auto transform origin-top transition-all duration-200 opacity-0 scale-95">
                        <!-- Options generated by JS -->
                    </div>
                </div>

                <!-- Teacher Name Input -->
                <div class="relative">
                    <input type="text" id="teacher-input" placeholder="请输入教师姓名" class="bg-white border border-gray-300 text-gray-700 py-2 px-4 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 w-40 text-sm transition-shadow">
                </div>

                <!-- Action Buttons -->
                <button onclick="handleSearch()" class="bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-5 rounded-lg text-sm transition-all duration-200 shadow-sm hover:shadow">
                    查询
                </button>
                <button onclick="handleReset()" class="bg-white hover:bg-gray-50 text-gray-700 border border-gray-300 font-medium py-2 px-5 rounded-lg text-sm transition-all duration-200 shadow-sm hover:shadow">
                    重置
                </button>
            </div>
            
            <!-- Removed "Add" Button as requested -->
        </div>

        <!-- Table Section -->
        <div class="table-container flex-1 border border-gray-200 rounded-lg relative bg-white overflow-auto">
            <table class="min-w-max w-full divide-y divide-gray-200">
                <thead class="bg-gray-50 sticky top-0 shadow-sm z-30">
                    <tr>
                        <th scope="col" class="px-3 py-4 text-center text-xs font-bold text-gray-600 uppercase tracking-wider">学年</th>
                        <th scope="col" class="px-3 py-4 text-center text-xs font-bold text-gray-600 uppercase tracking-wider">学期</th>
                        <th scope="col" class="px-3 py-4 text-center text-xs font-bold text-gray-600 uppercase tracking-wider">课程代码</th>
                        <th scope="col" class="px-3 py-4 text-center text-xs font-bold text-gray-600 uppercase tracking-wider">课程名称</th>
                        <th scope="col" class="px-3 py-4 text-center text-xs font-bold text-gray-600 uppercase tracking-wider">课程类别</th>
                        <th scope="col" class="px-3 py-4 text-center text-xs font-bold text-gray-600 uppercase tracking-wider">所属学院</th>
                        <th scope="col" class="px-3 py-4 text-center text-xs font-bold text-gray-600 uppercase tracking-wider">学生人数</th>
                        <th scope="col" class="px-3 py-4 text-center text-xs font-bold text-gray-600 uppercase tracking-wider">任课老师</th>
                        <th scope="col" class="px-3 py-4 text-center text-xs font-bold text-gray-600 uppercase tracking-wider">学分</th>
                        <th scope="col" class="px-3 py-4 text-center text-xs font-bold text-gray-600 uppercase tracking-wider">iClass课程创建状态</th>
                        <th scope="col" class="px-3 py-4 text-center text-xs font-bold text-gray-600 uppercase tracking-wider">详细信息</th>
                    </tr>
                </thead>
                <tbody class="bg-white divide-y divide-gray-200 text-sm" id="table-body">
                    <!-- Rows will be generated by JS -->
                </tbody>
            </table>
        </div>

        <!-- Pagination Section -->
        <div class="flex flex-wrap items-center justify-between pt-3 mt-auto shrink-0" id="pagination-container">
            <!-- Pagination will be generated by JS -->
        </div>
    </div>

    <script>
        // --- Mock Data ---
        const years = ['2023-2024', '2024-2025', '2025-2026'];
        const semesters = ['春季', '秋季'];
        const colleges = [
            '机械与汽车工程学院', '电子电气工程学院', '马克思主义学院', '工商管理学院', 
            '外国语学院', '化学化工学院', '艺术设计学院', '城市轨道交通学院', 
            '航空运输学院', '体育教学部', '理学院'
        ];
        
        const baseData = [
            { code: '01J030', name: '汽车自动驾驶仿真', type: '第二课堂学分', college: '机械与汽车工程学院', students: 20, teacher: '陈晓东', credits: 1.0, status: '未创建', details: { day: '周三', room: '现代交通工程中心8B313-315', period: '10-11', weeks: '1-5周' } },
            { code: '01J031', name: '智能机电传动控制', type: '专业课', college: '机械与汽车工程学院', students: 46, teacher: '张晓明', credits: 2.0, status: '已创建', details: { day: '周一', room: '机械楼A201', period: '3-4', weeks: '1-16周' } },
            { code: '01J032', name: '机器人工程', type: '集中实践教学环节', college: '机械与汽车工程学院', students: 102, teacher: '王茵茵', credits: 1.0, status: '未创建', details: { day: '周二', room: '实训中心B105', period: '5-6', weeks: '4-12周' } },
            { code: '011063', name: '工程热力学', type: '学科基础必修课', college: '机械与汽车工程学院', students: 115, teacher: '韩立', credits: 3.5, status: '已创建', details: { day: '周四', room: '教学楼C302', period: '1-2', weeks: '1-16周' } },
            { code: '212245', name: 'C语言程序设计', type: '公共基础必修课', college: '电子电气工程学院', students: 69, teacher: '赵曦', credits: 3.0, status: '已创建', details: { day: '周五', room: '计算机中心机房3', period: '3-4', weeks: '1-16周' } },
            { code: '215780', name: '电子技术', type: '学科基础必修课', college: '电子电气工程学院', students: 34, teacher: '孔丽丽', credits: 1.0, status: '已创建', details: { day: '周一', room: '电子楼B204', period: '7-8', weeks: '1-16周' } },
            { code: '081150', name: '航空运营管理', type: '学科基础必修课', college: '航空运输学院', students: 86, teacher: '杨阳', credits: 2.0, status: '未创建', details: { day: '周三', room: '航空楼A101', period: '5-6', weeks: '1-16周' } },
            { code: '230064', name: '体育', type: '公共基础必修课', college: '体育教学部', students: 32, teacher: '吴宇', credits: 1.0, status: '未创建', details: { day: '周二', room: '体育馆羽毛球场', period: '3-4', weeks: '1-16周' } },
            { code: '100010', name: '高等数学A', type: '公共基础必修课', college: '理学院', students: 120, teacher: '李华', credits: 5.0, status: '已创建', details: { day: '周一', room: '教学楼A101', period: '1-2', weeks: '1-16周' } },
            { code: '100020', name: '大学物理B', type: '公共基础必修课', college: '理学院', students: 90, teacher: '王伟', credits: 4.0, status: '已创建', details: { day: '周四', room: '教学楼A203', period: '3-4', weeks: '1-16周' } },
            { code: '300050', name: '管理学原理', type: '专业基础课', college: '工商管理学院', students: 60, teacher: '张强', credits: 3.0, status: '已创建', details: { day: '周三', room: '经管楼B305', period: '5-6', weeks: '1-16周' } },
            { code: '300060', name: '市场营销', type: '专业课', college: '工商管理学院', students: 55, teacher: '刘芳', credits: 2.5, status: '未创建', details: { day: '周五', room: '经管楼B308', period: '1-2', weeks: '1-12周' } },
            { code: '400010', name: '综合英语', type: '公共基础必修课', college: '外国语学院', students: 45, teacher: 'Sarah', credits: 4.0, status: '已创建', details: { day: '周二', room: '外语楼A402', period: '1-2', weeks: '1-16周' } },
            { code: '500020', name: '无机化学', type: '学科基础必修课', college: '化学化工学院', students: 80, teacher: '陈刚', credits: 3.5, status: '已创建', details: { day: '周一', room: '化工楼C102', period: '3-4', weeks: '1-16周' } },
            { code: '600030', name: '平面设计基础', type: '专业基础课', college: '艺术设计学院', students: 30, teacher: '林涛', credits: 3.0, status: '未创建', details: { day: '周四', room: '艺术楼D201', period: '5-8', weeks: '1-16周' } },
            { code: '700040', name: '城市轨道交通概论', type: '专业基础课', college: '城市轨道交通学院', students: 70, teacher: '赵强', credits: 2.0, status: '已创建', details: { day: '周三', room: '交通楼E105', period: '1-2', weeks: '1-8周' } },
            { code: '800050', name: '马克思主义基本原理', type: '公共基础必修课', college: '马克思主义学院', students: 150, teacher: '孙红', credits: 3.0, status: '已创建', details: { day: '周五', room: '大礼堂', period: '3-4', weeks: '1-16周' } },
            { code: '100011', name: '线性代数', type: '公共基础必修课', college: '理学院', students: 100, teacher: '钱敏', credits: 2.5, status: '已创建', details: { day: '周二', room: '教学楼A105', period: '3-4', weeks: '1-16周' } },
            { code: '01J033', name: '机械设计基础', type: '专业基础课', college: '机械与汽车工程学院', students: 50, teacher: '周杰', credits: 3.0, status: '已创建', details: { day: '周四', room: '机械楼A301', period: '1-2', weeks: '1-16周' } },
            { code: '212246', name: '数据结构', type: '专业必修课', college: '电子电气工程学院', students: 60, teacher: '吴磊', credits: 3.5, status: '未创建', details: { day: '周三', room: '电子楼B304', period: '5-6', weeks: '1-16周' } },
            { code: '230065', name: '篮球', type: '公共基础必修课', college: '体育教学部', students: 30, teacher: '郑强', credits: 1.0, status: '已创建', details: { day: '周一', room: '篮球场', period: '7-8', weeks: '1-16周' } },
            { code: '081151', name: '民航概论', type: '专业基础课', college: '航空运输学院', students: 90, teacher: '冯梅', credits: 2.0, status: '已创建', details: { day: '周五', room: '航空楼A202', period: '1-2', weeks: '1-16周' } }
        ];

        // Generate more data
        let scheduleData = [];
        for (let i = 0; i < 50; i++) {
            const base = baseData[i % baseData.length];
            const year = years[i % 3];
            const semester = semesters[i % 2];
            scheduleData.push({
                ...base,
                id: i,
                year: year,
                semester: semester,
                // Add some variation to prevent exact duplicates in list
                code: base.code + (Math.floor(i / baseData.length) > 0 ? `-${Math.floor(i / baseData.length)}` : '')
            });
        }

        // --- State ---
        let currentPage = 1;
        let pageSize = 10;
        let filteredData = [...scheduleData];
        let selectedYear = '';
        let selectedSemester = '';
        let selectedCollege = '';

        // --- Dropdown Setup Helper ---
        function setupDropdown(idPrefix, options, onSelect) {
            const btn = document.getElementById(`${idPrefix}-select-btn`);
            const menu = document.getElementById(`${idPrefix}-options`);
            const text = document.getElementById(`${idPrefix}-select-text`);
            const icon = document.getElementById(`${idPrefix}-select-icon`);
            const defaultText = text.textContent;

            // Render options
            menu.innerHTML = '';
            const defaultOption = document.createElement('div');
            defaultOption.className = 'px-4 py-2 hover:bg-gray-50 cursor-pointer text-sm text-gray-700 transition-colors';
            defaultOption.setAttribute('data-value', '');
            defaultOption.textContent = defaultText;
            menu.appendChild(defaultOption);

            options.forEach(opt => {
                const div = document.createElement('div');
                div.className = 'px-4 py-2 hover:bg-gray-50 cursor-pointer text-sm text-gray-700 transition-colors';
                div.setAttribute('data-value', opt);
                div.textContent = opt;
                menu.appendChild(div);
            });

            // Event Listeners
            btn.addEventListener('click', (e) => {
                e.stopPropagation();
                closeAllDropdowns(menu);
                toggleDropdown(menu, icon);
            });

            menu.addEventListener('click', (e) => {
                e.stopPropagation();
                const option = e.target.closest('div[data-value]');
                if (!option) return;
                
                const value = option.getAttribute('data-value');
                onSelect(value);
                
                text.textContent = value || defaultText;
                text.classList.toggle('text-gray-700', !!value);
                text.classList.toggle('text-gray-500', !value);
                closeDropdown(menu, icon);
            });
        }

        function toggleDropdown(menu, icon) {
            const isHidden = menu.classList.contains('hidden');
            if (isHidden) {
                menu.classList.remove('hidden');
                void menu.offsetWidth;
                menu.classList.remove('opacity-0', 'scale-95');
                icon.classList.add('rotate-180');
            } else {
                closeDropdown(menu, icon);
            }
        }

        function closeDropdown(menu, icon) {
            menu.classList.add('opacity-0', 'scale-95');
            icon.classList.remove('rotate-180');
            setTimeout(() => {
                menu.classList.add('hidden');
            }, 200);
        }

        function closeAllDropdowns(exceptMenu) {
            const dropdowns = [
                { menu: document.getElementById('year-options'), icon: document.getElementById('year-select-icon') },
                { menu: document.getElementById('semester-options'), icon: document.getElementById('semester-select-icon') },
                { menu: document.getElementById('college-options'), icon: document.getElementById('college-select-icon') }
            ];
            
            dropdowns.forEach(d => {
                if (d.menu !== exceptMenu && !d.menu.classList.contains('hidden')) {
                    closeDropdown(d.menu, d.icon);
                }
            });
        }

        document.addEventListener('click', () => {
            closeAllDropdowns(null);
        });

        // --- Init Dropdowns ---
        setupDropdown('year', years, (val) => selectedYear = val);
        setupDropdown('semester', semesters, (val) => selectedSemester = val);
        setupDropdown('college', colleges, (val) => selectedCollege = val);

        // --- Filter Logic ---
        function handleSearch() {
            const teacherVal = document.getElementById('teacher-input').value.trim().toLowerCase();
            
            filteredData = scheduleData.filter(item => {
                const matchYear = !selectedYear || item.year === selectedYear;
                const matchSemester = !selectedSemester || item.semester === selectedSemester;
                const matchCollege = !selectedCollege || item.college === selectedCollege;
                const matchTeacher = !teacherVal || item.teacher.toLowerCase().includes(teacherVal);
                return matchYear && matchSemester && matchCollege && matchTeacher;
            });
            
            currentPage = 1;
            renderTable();
            renderPagination();
        }

        function handleReset() {
            selectedYear = '';
            selectedSemester = '';
            selectedCollege = '';
            document.getElementById('teacher-input').value = '';
            
            // Reset dropdown UI
            ['year', 'semester', 'college'].forEach(prefix => {
                const text = document.getElementById(`${prefix}-select-text`);
                const defaultText = prefix === 'year' ? '请选择学年' : (prefix === 'semester' ? '请选择学期' : '请选择学院');
                text.textContent = defaultText;
                text.classList.remove('text-gray-700');
                text.classList.add('text-gray-500');
            });

            filteredData = [...scheduleData];
            currentPage = 1;
            renderTable();
            renderPagination();
        }

        // --- Table Render Logic ---
        function renderTable() {
            const tbody = document.getElementById('table-body');
            tbody.innerHTML = '';
            
            const start = (currentPage - 1) * pageSize;
            const end = start + pageSize;
            const pageData = filteredData.slice(start, end);
            
            pageData.forEach((item, index) => {
                const tr = document.createElement('tr');
                tr.className = 'hover:bg-gray-50 transition-colors duration-150 group border-b border-gray-100';
                tr.innerHTML = `
                    <td class="px-3 py-4 text-center text-gray-800">${item.year}</td>
                    <td class="px-3 py-4 text-center text-gray-800">${item.semester}</td>
                    <td class="px-3 py-4 text-center text-gray-800">${item.code}</td>
                    <td class="px-3 py-4 text-center text-gray-800 font-medium">${item.name}</td>
                    <td class="px-3 py-4 text-center text-gray-600">${item.type}</td>
                    <td class="px-3 py-4 text-center text-gray-600">${item.college}</td>
                    <td class="px-3 py-4 text-center text-gray-600">${item.students}</td>
                    <td class="px-3 py-4 text-center text-gray-600">${item.teacher}</td>
                    <td class="px-3 py-4 text-center text-gray-600">${item.credits.toFixed(1)}</td>
                    <td class="px-3 py-4 text-center text-gray-600">${item.status}</td>
                    <td class="px-3 py-4 text-center">
                        <button onclick="toggleDetails(this)" class="text-gray-400 hover:text-blue-500 transition-colors focus:outline-none w-8 h-8 rounded-full hover:bg-blue-50 flex items-center justify-center mx-auto">
                            <i class="fas fa-chevron-right text-sm transform transition-transform duration-200"></i>
                        </button>
                    </td>
                `;
                tbody.appendChild(tr);

                // Details Row
                const detailsTr = document.createElement('tr');
                detailsTr.className = 'hidden bg-gray-50/50 details-row';
                detailsTr.innerHTML = `
                    <td colspan="11" class="p-0 border-b border-gray-100">
                        <div class="px-10 py-4 bg-gray-50 shadow-inner">
                            <table class="w-full text-sm">
                                <thead>
                                    <tr class="text-gray-500 border-b border-gray-200">
                                        <th class="py-2 text-center font-medium w-1/4">星期</th>
                                        <th class="py-2 text-center font-medium w-1/4">教室</th>
                                        <th class="py-2 text-center font-medium w-1/4">节次</th>
                                        <th class="py-2 text-center font-medium w-1/4">周次</th>
                                    </tr>
                                </thead>
                                <tbody class="text-gray-700">
                                    <tr>
                                        <td class="py-4 text-center">${item.details.day}</td>
                                        <td class="py-4 text-center">${item.details.room}</td>
                                        <td class="py-4 text-center">${item.details.period}</td>
                                        <td class="py-4 text-center">${item.details.weeks}</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </td>
                `;
                tbody.appendChild(detailsTr);
            });
        }

        function toggleDetails(btn) {
            const tr = btn.closest('tr');
            const detailsTr = tr.nextElementSibling;
            const icon = btn.querySelector('i');
            
            if (detailsTr.classList.contains('hidden')) {
                detailsTr.classList.remove('hidden');
                icon.classList.add('rotate-90');
                tr.classList.add('bg-blue-50/30');
            } else {
                detailsTr.classList.add('hidden');
                icon.classList.remove('rotate-90');
                tr.classList.remove('bg-blue-50/30');
            }
        }

        // --- Pagination Logic ---
        function renderPagination() {
            const container = document.getElementById('pagination-container');
            const totalItems = filteredData.length;
            const totalPages = Math.ceil(totalItems / pageSize);
            
            let html = `
                <div class="text-sm text-gray-600 font-medium">
                    共 ${totalItems} 条
                </div>
                <div class="flex items-center space-x-3">
                    <div class="relative group">
                        <select onchange="handlePageSizeChange(this.value)" class="appearance-none bg-white border border-gray-300 text-gray-700 py-1.5 pl-3 pr-8 rounded-md text-sm focus:outline-none focus:ring-1 focus:ring-blue-500 transition-shadow">
                            <option value="10" ${pageSize == 10 ? 'selected' : ''}>10条/页</option>
                            <option value="20" ${pageSize == 20 ? 'selected' : ''}>20条/页</option>
                            <option value="50" ${pageSize == 50 ? 'selected' : ''}>50条/页</option>
                        </select>
                        <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-400 group-hover:text-blue-500 transition-colors">
                            <i class="fas fa-chevron-down text-xs"></i>
                        </div>
                    </div>

                    <div class="flex items-center space-x-1">
                        <button onclick="changePage(${currentPage - 1})" ${currentPage === 1 ? 'disabled' : ''} class="w-8 h-8 flex items-center justify-center rounded border border-gray-300 bg-white text-gray-600 hover:bg-gray-50 hover:text-blue-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed">
                            <i class="fas fa-chevron-left text-xs"></i>
                        </button>
            `;

            for (let i = 1; i <= totalPages; i++) {
                if (i === 1 || i === totalPages || (i >= currentPage - 1 && i <= currentPage + 1)) {
                    const isActive = i === currentPage;
                    html += `
                        <button onclick="changePage(${i})" class="w-8 h-8 flex items-center justify-center rounded border ${isActive ? 'border-blue-500 bg-blue-500 text-white font-medium shadow-sm' : 'border-gray-300 bg-white text-gray-600 hover:bg-gray-50 hover:text-blue-600 transition-colors'}">
                            ${i}
                        </button>
                    `;
                } else if (i === currentPage - 2 || i === currentPage + 2) {
                    html += `<span class="w-8 h-8 flex items-center justify-center text-gray-400">...</span>`;
                }
            }

            html += `
                        <button onclick="changePage(${currentPage + 1})" ${currentPage === totalPages ? 'disabled' : ''} class="w-8 h-8 flex items-center justify-center rounded border border-gray-300 bg-white text-gray-600 hover:bg-gray-50 hover:text-blue-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed">
                            <i class="fas fa-chevron-right text-xs"></i>
                        </button>
                    </div>
                    
                    <div class="flex items-center text-sm text-gray-600 ml-2">
                        <span class="mr-2">跳至</span>
                        <input type="number" min="1" max="${totalPages}" onchange="changePage(this.value)" class="w-10 h-8 border border-gray-300 rounded text-center focus:outline-none focus:ring-1 focus:ring-blue-500 mx-1 transition-shadow" value="${currentPage}">
                        <span class="ml-1">页</span>
                    </div>
                </div>
            `;
            
            container.innerHTML = html;
        }

        function changePage(page) {
            const totalPages = Math.ceil(filteredData.length / pageSize);
            page = parseInt(page);
            if (page < 1 || page > totalPages || page === currentPage) return;
            currentPage = page;
            renderTable();
            renderPagination();
        }

        function handlePageSizeChange(size) {
            pageSize = parseInt(size);
            currentPage = 1;
            renderTable();
            renderPagination();
        }

        // Init
        renderTable();
        renderPagination();
    </script>
</body>
</html>